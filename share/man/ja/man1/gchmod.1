.\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.47.13.
.TH CHMOD "1" "2021年5月" "GNU coreutils" "ユーザーコマンド"
.SH 名前
chmod \- ファイルのモードビットを変更する
.SH 書式
.B chmod
[\fI\,OPTION\/\fR]... \fI\,MODE\/\fR[\fI\,,MODE\/\fR]... \fI\,FILE\/\fR...
.br
.B chmod
[\fI\,OPTION\/\fR]... \fI\,OCTAL-MODE FILE\/\fR...
.br
.B chmod
[\fI\,OPTION\/\fR]... \fI\,--reference=RFILE FILE\/\fR...
.SH 説明
このマニュアルページでは GNU バージョンの \fBchmod\fP について説明しています。
\fBchmod\fP は指定されたファイルのモードビット (mode bits) を
\fImode\fP に基いて変更します。
\fImode\fP は、変更内容の記号表現 (記号モード)か、新しく設定するモードビットの
ビットパターンを表す 8 進数 (数値モード) のどちらかで指定します。
.PP
記号モードの書式は
[\fBugoa\fP.\|.\|.][[\fB-+=\fP][\fIperms\fP.\|.\|.].\|.\|.] です。
\fIperms\fP には、\fBrwxXst\fP のうち 0 個以上の文字か、
\fBugo\fP のいずれか 1 文字を指定します。
コンマで区切って、複数の記号表現を指定することができます。
.PP
\fBugoa\fP の組み合わせで、そのファイルに対するユーザのアクセス権限を制御します。
それぞれ、ファイルの所有者のユーザ (\fBu\fP)、ファイルのグループに属する
所有者以外のユーザ (\fBg\fP)、ファイルのグループに属さない他のユーザ (\fBo\fP)、
全てのユーザ (\fBa\fP) を意味します。
\fBugoa\fP のどれも指定されなかった場合、(\fBa\fP) が指定されたのと同じ効果を
持ちますが、umask でセットされているビットは変更されません。
.PP
\fB+\fP 演算子は、各ファイルの現在のファイルモードビットに
指定されたファイルモードビットを追加します。
\fB\-\fP を指定すると、指定されたファイルモードビットが削除されます。
\fB=\fP を指定すると、指定されたファイルモードビットが追加され、
指定されていないビットが削除されます。
ただし、指定されていないビットのうち、ディレクトリの set\-user\-ID と
set\-group\-ID は影響を受けません。
.PP
文字 \fBrwxXst\fP で設定対象のユーザのファイルモードビットを選択します:
読み出し許可 (\fBr\fP)、書き込み許可 (\fBw\fP)、
実行許可 (もしくはディレクトリの検索許可) (\fBx\fP)、
ファイルがディレクトリの場合もしくはファイルが
実行許可/検索許可 (ただし、ファイルがディレクトリの場合か、
あるユーザに対してすでに実行許可がある場合のみ) (\fBX\fP)、
実行時にユーザ ID もしくはグループ ID を設定する (\fBs\fP)、
削除制限 (restricted deletion) フラグもしくはスティッキービット (\fBt\fP)。
これらの文字を一つ以上指定する代わりに、
文字 \fBugo\fP のいずれか一つだけを指定することもできます:
ファイルを所有するユーザに付与されたアクセス許可 (\fBu\fP)、
ファイルのグループの所有者以外のメンバーに付与されたアクセス許可 (\fBg\fP)、
前記のどちらでもないユーザに付与されたアクセス許可 (\fBo\fP)。
.PP
数値モードでは 1 桁から 4 桁の 8 進数 (0\-7) で指定します。
その値は、ビットを値 4, 2, 1 に対応させたものを加算することで得られます。
省略された桁は先頭にある  0 とみなされます。
1 桁目では、set\-user\-ID (4)、set\-group\-ID (2)、削除制限/スティッキー (1)
といった属性を指定します。
2 桁目では、ファイルを所有するユーザに対するアクセス許可を指定します:
読み出し許可 (4)、書き込み許可 (2)、実行許可 (1)。
3 桁目ではファイルのグループの所有者以外のメンバーに対するアクセス許可を
指定します: 値は 2 桁目と同じ。
4 桁目ではファイルのグループに属さないユーザに対するアクセス許可を
指定します: 値は 2 桁目と同じ。
.PP
\fBchmod\fP はシンボリックリンクのアクセス許可を変更することはありません。
\fBchmod\fP システムコールがシンボリックリンクのアクセス許可を変更できないからです。
シンボリックリンクのアクセス許可が使われることは決してないため、
これは問題にはなりません。
しかし、\fBchmod\fP は、コマンドラインで列挙されたシンボリックリンク
それぞれについて、シンボリックリンクが指しているファイルのアクセス許可を
変更します。その一方で、\fBchmod\fP は再帰的にディレクトリを辿っている途中で
見つけたシンボリックリンクは無視します。
.SH "SETUID ビットと SETGID ビット"
\fBchmod\fP は、ファイルのグループ ID がユーザの実効グループ ID とも
ユーザの追加グループ ID とも一致せず、
ユーザが適切な特権を持っていない場合は、
通常のファイルの set\-group\-ID ビットをクリアします。
他にも追加の制限があり、\fIMODE\fP や \fIRFILE\fP の set\-user\-ID ビットや
set\-group\-ID ビットが無視される場合があります。どのような動作になるかは
裏で呼び出される \fBchmod\fP システムコールのポリシーや機能に依存します。
疑わしい点がある場合は、動作しているシステムの動作を確認して下さい。
.PP
ディレクトリの場合、
\fBchmod\fP は、明示的に指定した場合を除き、 set\-user\-ID ビットと
set\-group\-ID ビットを保持します。
記号モードでこれらのビットの設定や解除を行うには、
\fBu+s\fP and \fBg\-s\fP のように指定します。

数値モードでディレクトリのこれらのビットを解除するには、
先頭に 0 を一つ余計につけるか
.RB ( 00755 )、
先頭に = をつける必要があります
.RB ( =755 )。
.SH 削除制限フラグとスティッキービット
削除制限フラグ (restricted deletion flag) とスティッキービット (sticky bit) は
1 ビットの情報で、ファイル種別によりその意味が変わります。
ディレクトリの場合、このビットがセットされていると、
非特権ユーザは、自分が所有者のファイルやディレクトリ以外は
そのディレクトリにあるファイルの削除や名前変更ができなくなります。
この機能はディレクトリの \fB削除制限フラグ\fP と呼ばれ、
\fB/tmp\fP などの誰でも書き込みできるディレクトリでは一般的に使われています。
いくつかの古いシステムでは、通常のファイルでこのビットが設定されている場合、
そのプログラムのテキストイメージがスワップデバイス上に保持され、
実行時により早くファイルがロードできるようになります。
この機能は \fBスティッキービット\fP と呼ばれます。
.SH オプション
.PP
各 FILE のモードを MODE に変更します。
\fB\-\-reference\fR を指定した場合は、各 FILE のモードを RFILE のものに変更する。
.TP
\fB\-c\fR, \fB\-\-changes\fR
verbose モードと同様だが、変更が行われた場合にのみ出力する
.TP
\fB\-f\fR, \fB\-\-silent\fR, \fB\-\-quiet\fR
ほとんどのエラーメッセージの出力を抑制する
.TP
\fB\-v\fR, \fB\-\-verbose\fR
処理した各ファイルについて診断メッセージを出力する
.TP
\fB\-\-no\-preserve\-root\fR
\&'/' を特別扱いしない (デフォルト)
.TP
\fB\-\-preserve\-root\fR
\&'/' に対する再帰的な操作を失敗させる
.TP
\fB\-\-reference\fR=\fI\,RFILE\/\fR
MODE の値ではなく RFILE のモードを使用する
.TP
\fB\-R\fR, \fB\-\-recursive\fR
ファイルとディレクトリを再帰的に変更する
.TP
\fB\-\-help\fR
使い方を表示して終了する
.TP
\fB\-\-version\fR
バージョン情報を表示して終了する
.PP
各 MODE の形式は '[ugoa]*([\-+=]([rwxXst]*|[ugo]))+|[\-+=][0\-7]+' です。
.PP
GNU coreutils のオンラインヘルプ: <https://www.gnu.org/software/coreutils/>
翻訳に関するバグは <https://translationproject.org/team/ja.html> に連絡してください。
詳細な文書 <https://www.gnu.org/software/coreutils/chmod>
(ローカルでは info '(coreutils) chmod invocation' で参照可能)。
.SH 作者
作者 David MacKenzie および Jim Meyering。
.SH 著作権
Copyright \(co 2020 Free Software Foundation, Inc.
ライセンス GPLv3+: GNU GPL version 3 or later <https://gnu.org/licenses/gpl.html>.
.br
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
.SH 関連項目
chmod(2)
.PP
.B chmod
の完全なマニュアルは Texinfo マニュアルとして整備されている。もし、
.B info
および
.B chmod
のプログラムが正しくインストールされているならば、コマンド
.IP
.B info chmod
.PP
を使用すると完全なマニュアルを読むことができるはずだ。
